source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
ctp <- fromJSON("https://api.covidtracking.com/v1/states/daily.json") %>%
select(state, date, new_reported_cases = positiveIncrease)
View(ctp)
ctp <- fromJSON("https://api.covidtracking.com/v1/states/daily.json") %>%
select(state, date, new_reported_cases = positiveIncrease) %>%
mutate(date = ymd(date))
View(vaccines)
## add new infections from CTP
ctp <- fromJSON("https://api.covidtracking.com/v1/states/daily.json") %>%
select(state_abb = state, date, new_reported_cases = positiveIncrease) %>%
mutate(date = ymd(date))
View(ctp)
vaccines <- left_join(vaccines, ctp, by = c("state", "date"))
vaccines <- left_join(vaccines, ctp, by = c("state_abb", "date"))
View(vaccines)
youyang <- read_csv("https://raw.githubusercontent.com/youyanggu/covid19_projections/master/infection_estimates/latest_all_estimates_states.csv")
View(youyang)
youyang <- read_csv("https://raw.githubusercontent.com/youyanggu/covid19_projections/master/infection_estimates/latest_all_estimates_states.csv") %>%
select(state-abb = state, date, newly_infected_est = new_infected_mean)
youyang <- read_csv("https://raw.githubusercontent.com/youyanggu/covid19_projections/master/infection_estimates/latest_all_estimates_states.csv") %>%
select(state_abb = state, date, newly_infected_est = new_infected_mean)
View(youyang)
youyang <- read_csv("https://raw.githubusercontent.com/youyanggu/covid19_projections/master/infection_estimates/latest_all_estimates_states.csv") %>%
select(state_abb = state, date, new_infected_est = new_infected_mean)
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
View(vaccines)
View(youyang)
str(youyang)
str(vaccines)
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
str(vaccines)
youyang <- read_csv("https://raw.githubusercontent.com/youyanggu/covid19_projections/master/infection_estimates/latest_all_estimates_states.csv") %>%
select(state_abb = state, date, new_infected_est = new_infected_mean) %>%
mutate(date = ymd(date) + 14,
new_infected_est = as.integer(new_infected_est))
vaccines <- left_join(vaccines, youyang, by = c("state_abb", "date"))
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
getwd()
nat_ctp <- ctp %>%
group_by(date) %>%
summarize(new_reported_cases =sum(new_reported_cases, na.rm = TRUE)) %>%
mutate(state = "United States")
vaccines <- vaccines %>%
group_by(state) %>%
fill(state_abb)
vaccines <- vaccines %>%
group_by(state) %>%
fill(state_abb, "up")
vaccines <- vaccines %>%
group_by(state) %>%
fill(state_abb, .direction = "up")
nat_youyang <- youyang %>%
group_by(date) %>%
summarize(new_infected_est =sum(new_infected_est, na.rm = TRUE)) %>%
mutate(state_abb = "US")
View(nat_youyang)
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
source('~/Covid-Personal - Copy/Vaccine Tracker/Vaccine-Tracker/vaccine_tracker.R', echo=TRUE)
